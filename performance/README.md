
=== Jan 3 Test 001 ===

commit: dd1443fe541389f8c38f28002240cb24a587b485

Proxy TCP to UDP. Two SIPps pushing TCP over one connection each. One SIPp acting as UAS, UDP only.

No JVM parameter changes whatsoever. Just default everything.

CPU: 124%
GC: only young generation collections (see details below)

SIPp UAC:
sipp -sn uac -t t1 -max_socket 200 -r 1 -rsa 127.0.0.1:5060  127.0.0.1:5080 

SIPp UAS:
sipp -sn uas -p 5080

jstat: 
 S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   
1024.0 1024.0  0.0   160.0  124416.0 94171.5   171008.0   42728.4   15488.0 15161.7 1920.0 1786.5   1699    2.195   0      0.000    2.195
1024.0 1024.0  0.0   608.0  116736.0   0.0     171008.0   42792.4   15488.0 15161.7 1920.0 1786.5   1701    2.200   0      0.000    2.200
512.0  1024.0 448.0   0.0   113152.0 15758.2   171008.0   42824.4   15488.0 15161.7 1920.0 1786.5   1702    2.206   0      0.000    2.206
1024.0 1024.0  0.0   224.0  109568.0 46773.6   171008.0   42856.4   15488.0 15161.7 1920.0 1786.5   1703    2.209   0      0.000    2.209
512.0  1024.0 448.0   0.0   106496.0 59534.4   171008.0   42888.4   15488.0 15161.7 1920.0 1786.5   1704    2.212   0      0.000    2.212
1024.0 1024.0  0.0   416.0  103424.0 61231.6   171008.0   42912.4   15488.0 15161.7 1920.0 1786.5   1705    2.216   0      0.000    2.216
512.0  1024.0 480.0   0.0   100352.0 67258.8   171008.0   42952.4   15488.0 15161.7 1920.0 1786.5   1706    2.220   0      0.000    2.220
1024.0 1024.0  0.0   192.0  97792.0  65562.0   171008.0   42984.4   15488.0 15161.7 1920.0 1786.5   1707    2.224   0      0.000    2.224

=== Jan 3 Test 002 ===

Same as Test 01 but with 6 SIPp UACs instead of two.

Def went better. 1600 CPS across those 6 SIPps didn't seem to be an issue. At 2400 CPS things went south. Seems like some SIPp instances started to misbehave, not sure why. Conclusion for now though is that we should be able to go beyond 800 CPS as long as we don't do more per TCP connection.

Idea: add a limit to how much traffic we are accepting across a single TCP connection. Perhaps even start to push back? Should probably check the netty writability change notifications etc.

 S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   
512.0  512.0  288.0   0.0   116224.0 28152.2   171008.0   42089.7   15744.0 15388.7 1920.0 1818.0   1420    2.923   0      0.000    2.923
512.0  512.0  288.0   0.0   116224.0 28152.2   171008.0   42089.7   15744.0 15388.7 1920.0 1818.0   1420    2.923   0      0.000    2.923
512.0  512.0  288.0   0.0   116224.0 28152.2   171008.0   42089.7   15744.0 15388.7 1920.0 1818.0   1420    2.923   0      0.000    2.923
512.0  512.0  288.0   0.0   116224.0 28152.2   171008.0   42089.7   15744.0 15388.7 1920.0 1818.0   1420    2.923   0      0.000    2.923
512.0  512.0  288.0   0.0   116224.0 28152.2   171008.0   42089.7   15744.0 15388.7 1920.0 1818.0   1420    2.923   0      0.000    2.923
512.0  512.0  288.0   0.0   116224.0 28152.2   171008.0   42089.7   15744.0 15388.7 1920.0 1818.0   1420    2.923   0      0.000    2.923
512.0  512.0  288.0   0.0   116224.0 28152.2   171008.0   42089.7   15744.0 15388.7 1920.0 1818.0   1420    2.923   0      0.000    2.923

=== Jan 3 Test 003 ===

Exacte same as 002 but made a small change to the code. Do a diff of the commits to see what.

 S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   
512.0  512.0   0.0   160.0  70656.0  28293.0   171008.0   37280.6   15744.0 15324.9 1920.0 1818.5   1369    1.787   0      0.000    1.787
512.0  512.0   0.0   160.0  70656.0  30044.9   171008.0   37280.6   15744.0 15324.9 1920.0 1818.5   1369    1.787   0      0.000    1.787
512.0  512.0   0.0   160.0  70656.0  30044.9   171008.0   37280.6   15744.0 15324.9 1920.0 1818.5   1369    1.787   0      0.000    1.787
512.0  512.0   0.0   160.0  70656.0  30044.9   171008.0   37280.6   15744.0 15324.9 1920.0 1818.5   1369    1.787   0      0.000    1.787
512.0  512.0   0.0   160.0  70656.0  30044.9   171008.0   37280.6   15744.0 15324.9 1920.0 1818.5   1369    1.787   0      0.000    1.787
512.0  512.0   0.0   160.0  70656.0  30044.9   171008.0   37280.6   15744.0 15324.9 1920.0 1818.5   1369    1.787   0      0.000    1.787
512.0  512.0   0.0   160.0  70656.0  30628.9   171008.0   37280.6   15744.0 15324.9 1920.0 1818.5   1369    1.787   0      0.000    1.787
512.0  512.0   0.0   160.0  70656.0  31335.5   171008.0   37280.6   15744.0 15324.9 1920.0 1818.5   1369    1.787   0      0.000    1.787
512.0  512.0   0.0   160.0  70656.0  31335.5   171008.0   37280.6   15744.0 15324.9 1920.0 1818.5   1369    1.787   0      0.000    1.787
512.0  512.0   0.0   160.0  70656.0  32503.5   171008.0   37280.6   15744.0 15324.9 1920.0 1818.5   1369    1.787   0      0.000    1.787

